---
назва: «Керування сервером»
description: Корисні команди для управління сервером.
---

## Зміна режиму гри

### Запуск користувацького/завантаженого ігрового режиму

- Відкрийте директорію, до якої ви встановили сервер (наприклад: /Rockstar Games/GTA San Andreas/server)
- Візьміть завантажений/компільований .amx файл і помістіть його до теки з режимами гри, куди ви встановили сервер
- Використовуйте RCON для зміни режиму.
- Також ви можете додати новий режим до ротації.

### Використання скриптів-фільтрів

Те саме, що й запуск користувацького режиму гри, за винятком:

- Помістіть файл .amx до теки з назвою `filterscripts`.
- Додайте до файлу server.cfg наступне: `filterscripts <ім'я скрипта>'

## Встановіть пароль до сервера

- Якщо ви хочете додати пароль, щоб тільки ваші друзі могли приєднатися, додайте його до [server.cfg](server.cfg):

```
пароль довільний
```

- Це зробить ваш сервер захищеним паролем з паролем «whatever» - змініть його на будь-який інший.
- Ви також можете змінити пароль під час гри за допомогою `/rcon password newpasswordhere`.
- Ви можете видалити пароль за допомогою `/rcon password 0` або перезапустити сервер.

## Використання RCON

### Вхід до системи

Ви можете увійти в систему як під час гри, набравши `/rcon login password`, так і поза грою, використовуючи режим RCON у [Віддаленій консолі](RemoteConsole).

Пароль такий самий, як ви встановили у [server.cfg](server.cfg)

### Додавання банів

##### samp.ban

samp.ban - це файл, який використовується для зберігання банів, включаючи наступну інформацію про бан:

- IP
- Дата
- Час
- Ім'я (Ім'я особи або причина, див. [BanEx](../../functions/BanEx))
- Тип бану

Щоб додати бан, просто додайте рядок на кшталт

```
IP_HERE [28/05/09 | 13:37:00] ГРАВЕЦЬ - ПРИЧИНА БАНУ
```

Де ``IP_HERE`` - це місце, де ви вказуєте IP, який ви хочете забанити.

##### Функція Ban()

Функція [Ban](../scripting/functions/Ban) може бути використана для заборони гравця у скрипті. Функція [BanEx](../scripting/functions/BanEx) додасть необов'язкову причину на кшталт

```
13.37.13.37 [28/05/09 | 13:37:00] Читер - INGAME BAN
```

##### Команда бану RCON

Команда RCON ban, що виконується шляхом введення /rcon ban в грі або введенням «ban» в консолі, використовується для бану конкретного гравця, який знаходиться на вашому сервері, для бану IP див. наступний розділ.

Просто введіть:

```
# Ingame:
/rcon ban PLAYERID

# Консоль:
ban PLAYERID
```

##### banip

Команда RCON banip, що виконується командою /rcon banip в грі або введенням «banip» в консолі, використовується для бану певної IP-адреси, щоб забанити гравця на вашому сервері за ID, див. попередній розділ. Приймаються підстановочні знаки для діапазону заборони.

Просто введіть

```
# Ingame:
/rcon banip IP

# Консоль:
banip IP
```

### Зняття банів

Після того, як когось забанили, є два способи зняти бан.

- Видалити з samp.ban
- Команда RCON `unbanip`

#### samp.ban

Файл samp.ban знаходиться у каталозі вашого сервера sa-mp, він містить рядки з наступною інформацією про кожну заборону:

- IP
- Дата
- Час
- Ім'я (Ім'я користувача або причина (див. [BanEx](../scripting/functions/BanEx)))
- Тип бану (INGAME, IP BAN і т.д.)

Приклади:

```
127.8.57.32 [13/06/09 | 69:69:69] NONE - IP BAN
13.37.13.37 [28/05/09 | 13:37:00] Kyeman - INGAME БАН
```

Щоб зняти бан, просто видаліть рядок, а потім виконайте команду RCON reloadbans, щоб змусити сервер перечитати samp.ban.

#### unbanip

Команду RCON unbanip можна використовувати в грі або з консолі сервера (чорної скриньки). Щоб розбанити IP-адресу, просто введіть `/rcon unbanip IP_HERE` у грі або `unbanip IP_HERE` у консолі.

Приклад:

```
13.37.13.37 [28/05/09 | 13:37:00] Kyeman - INGAME BAN
```

```
# Ingame:
/rcon unbanip 13.37.13.37

# Консоль
unbanip 13.37.13.37
```

Щоб розбанити їх, просто скористайтеся командою `unbanip`, а потім виконайте команду RCON `reloadbans`, щоб змусити сервер повторно прочитати samp.ban.

#### reloadbans

samp.ban - це файл, який містить інформацію про IP-адреси, що наразі заборонені на сервері. Цей файл зчитується при запуску сервера, тому, якщо ви знімаєте бан з IP-адреси, ви повинні ввести команду RCON `reloadbans`, щоб змусити сервер знову прочитати `amp.ban` і дозволити йому приєднатися до сервера.

### Команди RCON

Введіть cmdlist для команд (або varlist для змінних), що використовують RCON у грі (`/rcon cmdlist`).

Це функції, які ви, як адміністратор, можете використовувати:

| Команда | Опис
| --------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| `/rcon cmdlist` | Показує список команд.                                                                                                                           |
| `/rcon varlist` | Показує список поточних змінних.                                                                                                              |
| | `/rcon exit` | Закриває сервер.                                                                                                                                    |
| | `/rcon echo [text]` | Показує `[text]` у консолі сервера (НЕ у консолі клієнта у грі).                                                                     |
| `/rcon hostname [ім'я]` | Змінити текст імені хоста (_приклад: /rcon hostname мій сервер_).                                                                                       |
| `/rcon gamemodetext [ім'я]` | змінити текст режиму гри (_приклад: /rcon gamemodetext мій режим гри_).                                                                                 |
| `/rcon mapname [назва]` | змінити текст назви мапи (_приклад: /rcon mapname San Andreas_).                                                                                      |
| `/rcon exec [ім'я файлу]` | Виконати файл, який містить серверний cfg (_приклад: /rcon exec blah.cfg_).                                                                         |
| `/rcon kick [ID]| | Вдарити гравця з вказаним ID (_приклад: /rcon kick 2_).                                                                                          |
| `/rcon ban [ID]` | Забанити гравця з вказаним ID (_приклад: /rcon ban 2_).                                                                                            |
| `/rcon changemode [mode]| | Ця команда змінить поточний режим гри на вказаний (_приклад: якщо ви хочете грати у sftdm: /rcon changemode sftdm_).                        |
| `/rcon gmx` | Завантажить наступний режим гри у [server.cfg](server.cfg).                                                                                              |
| | `/rcon reloadbans` | Перезавантажує файл `amp.ban`, де зберігаються заборонені IP-адреси. Слід використовувати після зняття бану та IP-адреси.                                  |
| `/rcon reloadlog` | Перезавантажує файл `erver_log.txt`. Корисно для автоматичної ротації логів. Може бути викликаний відправкою сигналу `SIGUSR1` на сервер (тільки для Linux-сервера).  |
| `/rcon say` | Показує повідомлення гравцям у клієнтській консолі (приклад: `/rcon say hello` буде показано як `Admin: hello`).                                        |
| `/rcon players` | Показує гравців, які знаходяться на сервері (з їхніми іменами, IP та пінгом).                                                                                |
| `/rcon banip [IP]` | Забанити вказаний IP (_приклад: /rcon banip 127.0.0.1_).                                                                                                  |
| `/rcon unbanip [IP]` | Зняти заборону з даного IP (_приклад: /rcon unbanip 127.0.0.1_).                                                                                              |
| | `/rcon gravity` | Змінює гравітацію (_приклад: /rcon gravity 0.008_).                                                                                                 |
| `/rcon weather [ID]| | Змінює погоду (_приклад: /rcon weather 1_).                                                                                                     |
| `/rcon loadfs` | Завантажує заданий скрипт фільтрів (_приклад: /rcon loadfs adminfs_).                                                                                       |
| `/rcon weburl [url сервера]| | Змінює URL сервера у клієнті masterlists/SA-MP |/rcon weburl [url сервера]| | Змінює URL сервера у клієнті masterlists/SA-MP
| `/rcon unloadfs` | Вивантажити заданий скрипт фільтрів (_приклад: /rcon unloadfs adminfs_).                                                                                    |
| `/rcon reloadfs` | Перезавантажити вказаний скрипт фільтрів (_приклад: /rcon reloadfs adminfs_).                                                                                   |
| `/rcon rcon\_password [ПАРОЛЬ]` | Змінити пароль rcon.
| `/rcon password [password]` | Встановлення/скидання пароля сервера |/rcon messageslimit
| `/rcon messageslimit [count]` | Зміна кількості повідомлень на секунду, які клієнт надсилає серверу. (за замовчуванням 500) |/rcon
| `/rcon ackslimit [count]` | Зміна ліміту acks (за замовчуванням 3000) |/rcon ackslimit [count]| | Зміна ліміту acks (за замовчуванням 3000)
| `/rcon messageholelimit [count]` | Зміна ліміту дірок у повідомленнях (за замовчуванням 3000) |/rcon playtime
| `/rcon playertimeout [limit m/s]` | Змінити час у мілісекундах, доки гравець не надішле жодного пакета. (за замовчуванням 1000)| |/rcon language [мова]
| `/rcon language [language]| | Зміна мови сервера (_приклад: /rcon language English_). Відображається у браузері сервера.             |

Наведені вище чотири ліміти/лічильники зроблено для того, щоб уникнути кількох інструментів, які можуть атакувати будь-який сервер SA-MP, заморозивши його або вибивши з ладу. Тож, просто, просто встановіть їх відповідно до вашого сервера. Значення за замовчуванням, якщо ви бачите якісь неправильні удари, просто збільште значення якомога швидше, щоб невинні гравці не постраждали від цього.

### Пов'язані зворотні виклики та функції

Наступні функції зворотного виклику можуть бути корисними, оскільки вони так чи інакше пов'язані з цією статтею.

#### Функції зворотного виклику

- [OnRconLoginAttempt](../scripting/callbacks/OnRconLoginAttempt): Викликається при спробі входу в RCON.

#### Функції

- [IsPlayerAdmin](../scripting/functions/IsPlayerAdmin): Перевіряє, чи гравець увійшов до RCON.

- [SendRconCommand](../scripting/functions/SendRconCommand): Відправляє команду RCON через скрипт.


